Messenger:
	id: en_de
	name: "en_de"
	
	MDBoxLayout:
        id: bottom
        name: 'bottom'

        orientation: 'vertical'
        padding: dp(5), dp(10), dp(5), dp(10)
        #spacing: dp(8)
        md_bg_color: (2/255, 232/255, 144/255, 1)#(250/255, 156/255, 15/255, 1)

        canvas.before:
            Color:
                rgba: (12/255, 19/255, 77/255, .8)
            
            RoundedRectangle:
                size: self.size[0]-dp(10), self.size[1]-dp(15)
                pos: self.pos[0]+dp(5), self.pos[1]+dp(7.5)
                source: "images/hacker.png"
        
        MDBoxLayout:
            orientation: 'horizontal'
            pos_hint: {'center_x': .5, 'center_y': .5}
            padding: dp(7), dp(0), dp(7), dp(0)
            spacing: dp(10)
            cols: 2

            MDGridLayout:
                cols: 1

                MDLabel:
                    id: l1
                    name: 'l1'

                    text: '[b][color=#ffffff]Cifrado de Mensajes[/color][/b]'
                    font_size: dp(40)
                    markup: True
                    halign: 'center'
                    valign: 'center'
                    size_hint: (.5, .1)

                MDLabel:
                    id: remaining_eth
                    name: 'remaining_eth'

                    text: '[b][color=#02E80D]eth: 0.00[/color][/b]'
                    font_size: dp(20)
                    markup: True
                    halign: 'center'
                    valign: 'center'
                    size_hint: (.5, .05)

                MDFloatLayout:
                    cols: 1
                    #padding: dp()
                    spacing: dp(7)
                    canvas.before:
                        Color:
                            rgba: (.7, .7, .7, .1)

                        #############################
                        Line:
                            points: (30, 520, 30, 550)
                            width: 4
                        
                        Line:
                            points: (80, 520, 80, 550)
                            width: 4
                        
                        Line:
                            points: (130, 520, 130, 550)
                            width: 4
                        
                        Line:
                            points: (180, 520, 180, 550)
                            width: 4
                        
                        Line:
                            points: (230, 520, 230, 550)
                            width: 4
                        
                        Line:
                            points: (280, 520, 280, 550)
                            width: 4
                        
                        Line:
                            points: (330, 520, 330, 550)
                            width: 4
                        
                        Line:
                            points: (380, 520, 380, 550)
                            width: 4
                        
                        Line:
                            points: (430, 520, 430, 550)
                            width: 4
                        
                        Line:
                            points: (480, 520, 480, 550)
                            width: 4
                        
                        Line:
                            points: (530, 520, 530, 550)
                            width: 4
                        
                        Line:
                            points: (580, 520, 580, 550)
                            width: 4
                        
                        
                        #############################
                        Line:
                            points: (30, 260, 80, 520)
                            width: 4
                        
                        Line:#
                            points: (80, 260, 30, 520)
                            width: 4
                        
                        Line:
                            points: (80, 260, 130, 520)
                            width: 4
                        
                        Line:#
                            points: (130, 260, 80, 520)
                            width: 4
                        
                        Line:
                            points: (130, 260, 180, 520)
                            width: 4
                        
                        Line:#
                            points: (180, 260, 130, 520)
                            width: 4
                        
                        Line:
                            points: (180, 260, 230, 520)
                            width: 4
                        
                        Line:#
                            points: (230, 260, 180, 520)
                            width: 4
                        
                        Line:
                            points: (230, 260, 280, 520)
                            width: 4
                        
                        Line:#
                            points: (280, 260, 230, 520)
                            width: 4
                        
                        Line:
                            points: (280, 260, 330, 520)
                            width: 4
                        
                        Line:#
                            points: (330, 260, 280, 520)
                            width: 4
                        
                        Line:
                            points: (330, 260, 380, 520)
                            width: 4
                        
                        Line:#
                            points: (380, 260, 330, 520)
                            width: 4

                        Line:
                            points: (380, 260, 430, 520)
                            width: 4
                        
                        Line:#
                            points: (430, 260, 380, 520)
                            width: 4

                        Line:
                            points: (430, 260, 480, 520)
                            width: 4
                        
                        Line:#
                            points: (480, 260, 430, 520)
                            width: 4
                        
                        Line:
                            points: (480, 260, 530, 520)
                            width: 4
                        
                        Line:#
                            points: (530, 260, 480, 520)
                            width: 4
                        
                        Line:
                            points: (530, 260, 580, 520)
                            width: 4
                        
                        Line:#
                            points: (580, 260, 530, 520)
                            width: 4
                        #############################
                        Line:
                            points: (30, 20, 80, 260)
                            width: 4
                        
                        Line:#
                            points: (80, 20, 30, 260)
                            width: 4
                        
                        Line:
                            points: (80, 20, 130, 260)
                            width: 4
                        
                        Line:#
                            points: (130, 20, 80, 260)
                            width: 4
                        
                        Line:
                            points: (130, 20, 180, 260)
                            width: 4
                        
                        Line:#
                            points: (180, 20, 130, 260)
                            width: 4
                        
                        Line:
                            points: (180, 20, 230, 260)
                            width: 4
                        
                        Line:#
                            points: (230, 20, 180, 260)
                            width: 4
                        
                        Line:
                            points: (230, 20, 280, 260)
                            width: 4
                        
                        Line:#
                            points: (280, 20, 230, 260)
                            width: 4
                        
                        Line:
                            points: (280, 20, 330, 260)
                            width: 4
                        
                        Line:#
                            points: (330, 20, 280, 260)
                            width: 4
                        
                        Line:
                            points: (330, 20, 380, 260)
                            width: 4
                        
                        Line:#
                            points: (380, 20, 330, 260)
                            width: 4

                        Line:
                            points: (380, 20, 430, 260)
                            width: 4
                        
                        Line:#
                            points: (430, 20, 380, 260)
                            width: 4

                        Line:
                            points: (430, 20, 480, 260)
                            width: 4
                        
                        Line:#
                            points: (480, 20, 430, 260)
                            width: 4
                        
                        Line:
                            points: (480, 20, 530, 260)
                            width: 4
                        
                        Line:#
                            points: (530, 20, 480, 260)
                            width: 4
                        
                        Line:
                            points: (530, 20, 580, 260)
                            width: 4
                        
                        Line:#
                            points: (580, 20, 530, 260)
                            width: 4
                    
                    MDTextField:
                        id: url_eth
                        name: 'url_eth'
                        
                        text: 'http://127.0.0.1:7545' # http://127.0.0.1:7545
                        disabled: True
                        hint_text: 'URL'
                        multiline: False
                        current_hint_text_color: (1, 1, 1, 1)
                        size_hint: .85, .1
                        pos_hint: {'center_x': .5, 'center_y': .9}
                        line_color_normal: (0, 0, 0, 0)
                        line_color_focus: (0, 0, 0, 0)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        
                        canvas.after:
                            Color:
                                rgb: (1, 1, 1)
                            
                            Line:
                                rounded_rectangle: (self.pos[0]*.3, self.pos[1]+5, l1.size[0]*.95, l1.size[1], 10, 10, 20, 20, 100)
                                width: 2
                    
                    MDTextField:
                        id: private_key_from_eth
                        name: 'private_key_from_eth'
                        
                        text: '' # Example: 0a77ce573e83f93cc9bfnfa2622a5e6005a428x03d7027005728677d6073de43
                        hint_text: 'Clave Privada de Ethereum'
                        multiline: False
                        current_hint_text_color: (1, 1, 1, 1)
                        size_hint: .85, .1
                        pos_hint: {'center_x': .5, 'center_y': .78}
                        line_color_normal: (0, 0, 0, 0)
                        line_color_focus: (0, 0, 0, 0)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        
                        canvas.after:
                            Color:
                                rgb: (1, 1, 1)
                        
                            Line:
                                rounded_rectangle: (self.pos[0]*.3, self.pos[1]+5, l1.size[0]*.95, l1.size[1], 10, 10, 20, 20, 100)
                                width: 2
                                
                    MDTextField:
                        id: sender
                        name: 'sender'

                        hint_text: 'Cuenta del Usuario'
                        disabled: True
                        multiline: False
                        current_hint_text_color: (1, 1, 1, 1)
                        size_hint: .85, .1
                        pos_hint: {'center_x': .5, 'center_y': .66}
                        line_color_normal: (0, 0, 0, 0)
                        line_color_focus: (0, 0, 0, 0)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        
                        canvas.after:
                            Color:
                                rgb: (1, 1, 1)
                            
                            Line:
                                rounded_rectangle: (self.pos[0]*.3, self.pos[1]+5, l1.size[0]*.95, l1.size[1], 10, 10, 20, 20, 100)
                                width: 2

                    MDTextField:
                        id: addressee
                        name: 'addressee'

                        text: '' # Example: 0x49924499CDaBA89585Df5m06B963Db89359f0F6d
                        hint_text: 'cuenta destino'
                        multiline: False
                        current_hint_text_color: (1, 1, 1, 1)
                        size_hint: .85, .1
                        pos_hint: {'center_x': .5, 'center_y': .54}
                        line_color_normal: (0, 0, 0, 0)
                        line_color_focus: (0, 0, 0, 0)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        
                        canvas.after:
                            Color:
                                rgb: (1, 1, 1)
                            
                            Line:
                                rounded_rectangle: (self.pos[0]*.3, self.pos[1]+5, l1.size[0]*.95, l1.size[1], 10, 10, 20, 20, 100)
                                width: 2
                    
                    MDIconButton:
                        id: anim_msg_1
                        name: 'anim_msg_1'

                        icon: 'message-text'
                        user_font_size: dp(50)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        pos_hint: {'center_x': .1, 'center_y': .4}
                    
                    MDIconButton:
                        id: anim_msg_2
                        name: 'anim_msg_2'

                        icon: 'message-text'
                        user_font_size: dp(50)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        pos_hint: {'center_x': .1, 'center_y': .1}

                    MDIconButton:
                        id: anim_msg_central
                        name: 'anim_msg_central'

                        icon: 'message-text-lock'
                        user_font_size: dp(150)#dp(70)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        pos_hint: {'center_x': .5, 'center_y': .25}
                    
                    MDIconButton:
                        id: anim_msg_3
                        name: 'anim_msg_3'

                        icon: 'message-text'
                        user_font_size: dp(50)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        pos_hint: {'center_x': .9, 'center_y': .4}
                    
                    MDIconButton:
                        id: anim_msg_4
                        name: 'anim_msg_4'

                        icon: 'message-text'
                        user_font_size: dp(50)
                        theme_text_color: 'Custom'
                        text_color: (1, 1, 1, 1)
                        pos_hint: {'center_x': .9, 'center_y': .1}

            MDFloatLayout:
                cols: 1
                size_hint: (.01, 1)

                MDGridLayout:
                    cols: 1
                    size_hint: (1, .9)
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    md_bg_color: (2/255, 232/255, 144/255, 1)#(250/255, 156/255, 15/255, 1)

            MDGridLayout:
                cols: 1
                padding: dp(0), dp(10), dp(0), dp(0)
                spacing: dp(10)
                MDGridLayout:
                    cols: 1
                    padding: dp(0), dp(5), dp(0), dp(10)

                    canvas.before:
                        Color:
                            rgb: (1, 1, 1)
                        
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    
                    TextInput:
                        id: chat_box
                        name: 'chat_box'

                        hint_text: 'Chat donde aparecera el texto cifrado que usted envie'
                        multiline: True
                        background_disabled_normal: ''
                        disabled: True
                        size_hint: (1, 1)
                
                MDGridLayout:
                    cols: 1
                    size_hint: (1, .3)

                    MDGridLayout:
                        cols: 1
                        size_hint: (1, .6)

                        MDTextFieldRect:
                            id: msg
                            name: 'msg'

                            hint_text: 'Escriba su Mensaje'

                    MDGridLayout:
                        id: x
                        name: 'x'

                        cols: 5
                        spacing: dp(5)
                        size_hint: (1, .3)

                        MDCheckbox:
                            id: rot13
                            name: 'rot13'

                            active: True
                            group: 'method'
                            size_hint: None, None
                            size: x.size[1], x.size[1]
                            selected_color: (1, 1, 1, 1)
                            unselected_color: (1, 1, 1, 1)
                        
                        MDLabel:
                            text: '[b][color=#ffffff]Rot 13[/b][/color]'
                            #size_hint: (.4, 1)
                            markup: True

                        MDCheckbox:
                            id: enigma
                            name: 'enigma'
                            
                            active: False
                            group: 'method'
                            size_hint: None, None
                            size: x.size[1], x.size[1]
                            selected_color: (1, 1, 1, 1)
                            unselected_color: (1, 1, 1, 1)
                        
                        MDLabel:
                            text: '[b][color=#ffffff]Enigma[/b][/color]'
                            markup: True
                        
                        MDFloatLayout:
                            cols: 1
                            size_hint: (3, 1)
                            MDRaisedButton:
                                id: execute
                                name: 'execute'

                                text: 'Cifrar'
                                on_release: msg.text = ''
                                on_press: 
                                    url_eth.focus = False
                                    private_key_from_eth.focus = False
                                    sender.focus = False
                                    addressee.focus = False
                                    msg.focus = False
                                    if enigma.active == True or rot13.active == True:\
                                    root.runEncryption(enigma.active, msg, chat_box, url_eth.text, sender.text, addressee.text, private_key_from_eth.text)
                                    else:\
                                    root.openDialog(title='Error', text='Debes de seleccionar un metodo de cifrado.')
                                pos_hint: {'center_x': .4, 'center_y': .5}
                                #color: (1, 1, 1, 1)
                                canvas.after:
                                    Color:
                                        rgba: (1, 1, 1, 1)
                                    
                                    Line:
                                        rounded_rectangle: (self.pos[0], self.pos[1], self.size[0], self.size[1], 0, 0, 0, 0, 100)#(self.pos[0]*.97, self.pos[1]*.7, self.size[0]*2.5, self.size[1]*2, 10, 10, 10, 10, 100)
                                        width: 1
                                        
                            MDRaisedButton:
                                id: save
                                name: 'save'

                                text: 'Guardar Chat'
                                on_press: root.saveChat(root.user, chat_box.text)
                                pos_hint: {'center_x': .8, 'center_y': .5}
                                canvas.after:
                                    Color:
                                        rgba: (1, 1, 1, 1)
                                    
                                    Line:
                                        rounded_rectangle: (self.pos[0], self.pos[1], self.size[0], self.size[1], 0, 0, 0, 0, 100)#(self.pos[0]*.97, self.pos[1]*.7, self.size[0]*2.5, self.size[1]*2, 10, 10, 10, 10, 100)
                                        width: 1
    
    MDIconButton:
        icon: 'alpha-x-box'
        theme_text_color: 'Custom'
        text_color: (1, 0, 0, 1)
        pos_hint: {'center_x': .99, 'center_y': .985}
        on_press: root.openDialog(title='Sesi√≥n Cerrada', text=''), root.endSeasson(sender, private_key_from_eth, url_eth, chat_box, msg) #app.resizeWindow(size=(500, 600), left=400, top=2)

    MDIconButton:
        icon: 'alpha-x'
        theme_text_color: 'Custom'
        text_color: (1, 1, 1, 1)
        pos_hint: {'center_x': .99, 'center_y': .985}
                                
